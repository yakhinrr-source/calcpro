<!DOCTYPE html>
<html lang="ru">
<head>
<meta charset="UTF-8">
<title>S&P Finance</title>
<style>
body{margin:0;font-family:Arial;background:#0f172a;color:#e5e7eb;overflow-x:hidden}
a{color:#38bdf8;text-decoration:none}
.container{display:grid;grid-template-columns:360px 1fr;min-height:100vh}
.sidebar{background:#020617;padding:15px;border-right:1px solid #1e293b;position:sticky;top:0;height:100vh;overflow-y:auto}
.main{padding:0;display:flex;flex-direction:column}
.header{
  position:sticky;top:0;background:#0f172a;z-index:1000;
  padding:16px 24px;font-size:2rem;font-weight:700;
  border-bottom:1px solid #1e293b;text-align:center;
}
.news,.tiles,.calc,.btc-chart{background:#020617;border:1px solid #1e293b;border-radius:10px;padding:15px;margin:15px}
.news-item{display:flex;gap:10px;margin-bottom:10px}
.news-item img{width:70px;height:70px;object-fit:cover;border-radius:8px}
.tiles{display:grid;grid-template-columns:repeat(2,1fr);gap:15px}
.tile{cursor:pointer;text-align:center;padding:40px;font-size:18px}
.tile:hover{background:#020617cc}
input,select,button{width:100%;margin:6px 0;padding:7px;border-radius:6px;border:none}
button{background:#38bdf8;color:#020617;cursor:pointer}
.back{cursor:pointer;margin-bottom:10px;display:inline-block}
footer{text-align:center;border-top:1px solid #1e293b;padding:10px}
marquee{color:#94a3b8;margin-bottom:10px;font-size:1.1rem}
.calc{display:none}
.btc-chart{height:320px}
</style>
</head>
<body>

<div class="container">

  <!-- –õ–ï–í–ê–Ø –ü–ê–ù–ï–õ–¨ ‚Äì –ö–£–†–°–´ (–∫–∞–∫ —É —Ç–µ–±—è) -->
  <aside class="sidebar">
    <h3 style="text-align:center;">–†—ã–Ω–∫–∏</h3>
    <div style="width:100%;height:600px;background:#131722;border-radius:12px;overflow:hidden">
      <script src="https://s3.tradingview.com/external-embedding/embed-widget-market-overview.js" async>
      {
      "colorTheme":"dark",
      "locale":"ru",
      "width":"100%",
      "height":"100%",
      "showChart":false,
      "isTransparent":true,
      "tabs":[
      {"title":"–í–∞–ª—é—Ç—ã","symbols":[
      {"s":"FX_IDC:USDRUB"},{"s":"FX_IDC:EURRUB"},{"s":"FX_IDC:CNYRUB"}]},
      {"title":"–ö—Ä–∏–ø—Ç–∞","symbols":[
      {"s":"BINANCE:BTCUSDT"},{"s":"BINANCE:ETHUSDT"},{"s":"OKX:TONUSDT"}]},
      {"title":"–†–µ—Å—É—Ä—Å—ã","symbols":[
      {"s":"OANDA:XAUUSD"},{"s":"TVC:UKOIL"}]}
      ]
      }
      </script>
    </div>
  </aside>

  <!-- –û–°–ù–û–í–ù–û–ô –ö–û–ù–¢–ï–ù–¢ -->
  <main class="main">

    <!-- –§–ò–ö–°–ò–†–û–í–ê–ù–ù–´–ô –ó–ê–ì–û–õ–û–í–û–ö -->
    <div class="header">S&P Finance</div>

    <!-- –ù–û–í–û–°–¢–ò (–æ–Ω–ª–∞–π–Ω, —Å–≤–µ–∂–∏–µ) -->
    <section class="news">
      <h2>–ù–æ–≤–æ—Å—Ç–∏ —ç–∫–æ–Ω–æ–º–∏–∫–∏, –ø–æ–ª–∏—Ç–∏–∫–∏, –∫—Ä–∏–ø—Ç—ã</h2>
      <marquee id="ticker" scrollamount="5">–ó–∞–≥—Ä—É–∑–∫–∞ –Ω–æ–≤–æ—Å—Ç–µ–π...</marquee>
      <div id="news"></div>
    </section>

    <!-- –ñ–ò–í–û–ô –ì–†–ê–§–ò–ö BITCOIN -->
    <section class="btc-chart">
      <h2>Bitcoin (BTC/USDT)</h2>
      <div class="tradingview-widget-container">
        <script type="text/javascript" src="https://s3.tradingview.com/tv.js"></script>
        <script type="text/javascript">
        new TradingView.widget({
          "width": "100%",
          "height": 300,
          "symbol": "BINANCE:BTCUSDT",
          "interval": "60",
          "timezone": "Etc/UTC",
          "theme": "dark",
          "style": "1",
          "locale": "ru",
          "toolbar_bg": "#f1f3f6",
          "enable_publishing": false,
          "allow_symbol_change": true,
          "container_id": "tvchart"
        });
        </script>
        <div id="tvchart"></div>
      </div>
    </section>

    <!-- –ü–õ–ò–¢–ö–ò –° –ö–ê–õ–¨–ö–£–õ–Ø–¢–û–†–ê–ú–ò -->
    <section id="content">
      <div class="tiles" id="tiles">
        <div class="tile" onclick="openCalc('deposit')">üí∞ –†–µ–∞–ª—å–Ω–∞—è –¥–æ—Ö–æ–¥–Ω–æ—Å—Ç—å –≤–∫–ª–∞–¥–∞</div>
        <div class="tile" onclick="openCalc('deval')">üìâ –ü–æ—Ç–µ—Ä–∏ –æ—Ç –¥–µ–≤–∞–ª—å–≤–∞—Ü–∏–∏</div>
        <div class="tile" onclick="openCalc('salary')">üí∏ –†–µ–∞–ª—å–Ω–∞—è –∑–∞—Ä–ø–ª–∞—Ç–∞</div>
        <div class="tile" onclick="openCalc('compound')">üìà –°–ª–æ–∂–Ω—ã–µ –ø—Ä–æ—Ü–µ–Ω—Ç—ã</div>
      </div>

      <!-- –û–∫–Ω–æ –∫–∞–ª—å–∫—É–ª—è—Ç–æ—Ä–∞ -->
      <div class="calc" id="calc"></div>
    </section>

    <!-- –§–£–¢–ï–† –° –°–°–´–õ–ö–û–ô -->
    <footer>
      <a href="https://t.me/s_p_finance" target="_blank"><strong>–ö–∞–Ω–∞–ª S&P Finance</strong></a>
    </footer>

  </main>
</div>

<script>
// === –ù–û–í–û–°–¢–ò (–æ–Ω–ª–∞–π–Ω, —Å–≤–µ–∂–∏–µ) ===
async function loadNews() {
  const url = `https://newsapi.org/v2/everything?q=—ç–∫–æ–Ω–æ–º–∏–∫–∞ OR –ø–æ–ª–∏—Ç–∏–∫–∞ OR –∫—Ä–∏–ø—Ç–∞ OR —Ñ–∏–Ω–∞–Ω—Å—ã OR –¶–ë OR —Ä—É–±–ª—å&language=ru&sortBy=publishedAt&pageSize=8&apiKey=fa73b6b2c7d79ca71ee42f9b97d17ab5`;
  try {
    const r = await fetch(url);
    const d = await r.json();
    const ticker = document.getElementById('ticker');
    const newsDiv = document.getElementById('news');
    ticker.innerHTML = '';
    newsDiv.innerHTML = '';
    if (!d.articles || d.articles.length === 0) {
      ticker.innerText = '–ù–æ–≤–æ—Å—Ç–µ–π –ø–æ–∫–∞ –Ω–µ—Ç';
      return;
    }
    d.articles.forEach(n => {
      ticker.innerHTML += ` üì∞ ${n.title} ‚Ä¢ `;
      newsDiv.innerHTML += `
        <div class="news-item">
          <img src="${n.urlToImage || 'https://via.placeholder.com/70?text=News'}">
          <div>
            <a href="${n.url}" target="_blank">${n.title}</a>
            <div style="font-size:0.85rem;color:#94a3b8;margin-top:4px">
              ${new Date(n.publishedAt).toLocaleString('ru-RU')}
            </div>
          </div>
        </div>`;
    });
  } catch(e) {
    ticker.innerText = '–û—à–∏–±–∫–∞ –∑–∞–≥—Ä—É–∑–∫–∏ –Ω–æ–≤–æ—Å—Ç–µ–π';
  }
}
loadNews();
setInterval(loadNews, 1800000); // –∫–∞–∂–¥—ã–µ 30 –º–∏–Ω—É—Ç

// === –ö–ê–õ–¨–ö–£–õ–Ø–¢–û–†–´ (—Ç–≤–æ–∏ 4) ===
function back() {
  document.getElementById('calc').style.display = 'none';
  document.getElementById('tiles').style.display = 'grid';
}

function openCalc(type) {
  document.getElementById('tiles').style.display = 'none';
  const calc = document.getElementById('calc');
  calc.style.display = 'block';
  calc.innerHTML = `<div class="back" onclick="back()">‚Üê –ù–∞ –≥–ª–∞–≤–Ω—É—é</div>`;

  if (type === 'deposit') {
    calc.innerHTML += `
      <h3>–†–µ–∞–ª—å–Ω–∞—è –¥–æ—Ö–æ–¥–Ω–æ—Å—Ç—å –≤–∫–ª–∞–¥–∞</h3>
      <input id="sum1" type="number" placeholder="–°—É–º–º–∞ –≤–∫–ª–∞–¥–∞ (‚ÇΩ)" value="100000">
      <input id="rate1" type="number" placeholder="–°—Ç–∞–≤–∫–∞ (% –≥–æ–¥–æ–≤—ã—Ö)" value="12" step="0.1">
      <input id="infl1" type="number" placeholder="–ò–Ω—Ñ–ª—è—Ü–∏—è –∑–∞ –≥–æ–¥ (%)" value="7" step="0.1">
      <button onclick="calcDeposit()">–†–∞—Å—Å—á–∏—Ç–∞—Ç—å</button>
      <div id="res1" class="result"></div>`;
  }
  else if (type === 'deval') {
    calc.innerHTML += `
      <h3>–ü–æ—Ç–µ—Ä–∏ –æ—Ç –¥–µ–≤–∞–ª—å–≤–∞—Ü–∏–∏</h3>
      <input id="sum2" type="number" placeholder="–°—É–º–º–∞ –≤ —Ä—É–±–ª—è—Ö" value="500000">
      <input id="dev2" type="number" placeholder="–î–µ–≤–∞–ª—å–≤–∞—Ü–∏—è –∑–∞ –≥–æ–¥ (%)" value="15" step="0.1">
      <button onclick="calcDeval()">–†–∞—Å—Å—á–∏—Ç–∞—Ç—å</button>
      <div id="res2" class="result"></div>`;
  }
  else if (type === 'salary') {
    calc.innerHTML += `
      <h3>–†–µ–∞–ª—å–Ω–∞—è —Å—Ç–æ–∏–º–æ—Å—Ç—å –∑–∞—Ä–ø–ª–∞—Ç—ã</h3>
      <input id="salary3" type="number" placeholder="–ó–∞—Ä–ø–ª–∞—Ç–∞ –≤ –º–µ—Å—è—Ü (‚ÇΩ)" value="80000">
      <input id="infl3" type="number" placeholder="–ò–Ω—Ñ–ª—è—Ü–∏—è –∑–∞ –≥–æ–¥ (%)" value="8" step="0.1">
      <button onclick="calcSalary()">–†–∞—Å—Å—á–∏—Ç–∞—Ç—å</button>
      <div id="res3" class="result"></div>`;
  }
  else if (type === 'compound') {
    calc.innerHTML += `
      <h3>–°–ª–æ–∂–Ω—ã–µ –ø—Ä–æ—Ü–µ–Ω—Ç—ã</h3>
      <input id="principal" type="number" placeholder="–ù–∞—á–∞–ª—å–Ω–∞—è —Å—É–º–º–∞ (‚ÇΩ)" value="100000">
      <input id="rate4" type="number" placeholder="–ì–æ–¥–æ–≤–∞—è —Å—Ç–∞–≤–∫–∞ (%)" value="10" step="0.1">
      <input id="years" type="number" placeholder="–°—Ä–æ–∫ (–ª–µ—Ç)" value="5">
      <select id="compound">
        <option value="1">–ï–∂–µ–≥–æ–¥–Ω–æ</option>
        <option value="4">–ï–∂–µ–∫–≤–∞—Ä—Ç–∞–ª—å–Ω–æ</option>
        <option value="12" selected>–ï–∂–µ–º–µ—Å—è—á–Ω–æ</option>
      </select>
      <button onclick="calcCompound()">–†–∞—Å—Å—á–∏—Ç–∞—Ç—å</button>
      <div id="res4" class="result"></div>`;
  }
}

// –§—É–Ω–∫—Ü–∏–∏ —Ä–∞—Å—á—ë—Ç–æ–≤
function calcDeposit() {
  const sum = parseFloat(document.getElementById('sum1').value) || 0;
  const rate = parseFloat(document.getElementById('rate1').value) / 100 || 0;
  const infl = parseFloat(document.getElementById('infl1').value) / 100 || 0;
  const profit = sum * rate;
  const real = profit - sum * infl;
  const realRate = sum > 0 ? (real / sum * 100).toFixed(2) : 0;
  document.getElementById('res1').innerHTML = 
    `–î–æ—Ö–æ–¥ –∑–∞ –≥–æ–¥: ${Math.round(profit).toLocaleString()} ‚ÇΩ<br>–†–µ–∞–ª—å–Ω–∞—è –¥–æ—Ö–æ–¥–Ω–æ—Å—Ç—å: ${realRate}%`;
}

function calcDeval() {
  const sum = parseFloat(document.getElementById('sum2').value) || 0;
  const dev = parseFloat(document.getElementById('dev2').value) / 100 || 0;
  const loss = sum * dev;
  document.getElementById('res2').innerHTML = 
    `–ü–æ—Ç–µ—Ä–∏: ${Math.round(loss).toLocaleString()} ‚ÇΩ<br>–û—Å—Ç–∞—Ç–æ–∫: ${Math.round(sum * (1-dev)).toLocaleString()} ‚ÇΩ`;
}

function calcSalary() {
  const sal = parseFloat(document.getElementById('salary3').value) || 0;
  const infl = parseFloat(document.getElementById('infl3').value) / 100 || 0;
  const real = sal * (1 - infl);
  document.getElementById('res3').innerHTML = 
    `–†–µ–∞–ª—å–Ω–∞—è –∑–∞—Ä–ø–ª–∞—Ç–∞ —á–µ—Ä–µ–∑ –≥–æ–¥: ${Math.round(real).toLocaleString()} ‚ÇΩ<br>–ü–æ—Ç–µ—Ä—è: ${Math.round(sal * infl).toLocaleString()} ‚ÇΩ`;
}

function calcCompound() {
  const p = parseFloat(document.getElementById('principal').value) || 0;
  const r = parseFloat(document.getElementById('rate4').value) / 100 || 0;
  const t = parseFloat(document.getElementById('years').value) || 0;
  const n = parseInt(document.getElementById('compound').value) || 12;
  const a = p * Math.pow(1 + r/n, n*t);
  const profit = a - p;
  document.getElementById('res4').innerHTML = 
    `–ò—Ç–æ–≥: ${Math.round(a).toLocaleString()} ‚ÇΩ<br>–ü—Ä–∏–±—ã–ª—å: ${Math.round(profit).toLocaleString()} ‚ÇΩ`;
}
</script>
</body>
</html>
