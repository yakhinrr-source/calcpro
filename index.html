<!DOCTYPE html>
<html lang="ru">
<head>
<meta charset="UTF-8">
<title>S&P Finance</title>

<style>
body{margin:0;font-family:Arial;background:#0f172a;color:#e5e7eb}
a{color:#38bdf8;text-decoration:none}
.container{display:grid;grid-template-columns:360px 1fr;min-height:100vh}
.sidebar{background:#020617;padding:15px;border-right:1px solid #1e293b}
.main{padding:15px;display:grid;grid-template-rows:auto auto 1fr auto;gap:15px}
.panel,.news,.tile,.calc{background:#020617;border:1px solid #1e293b;border-radius:10px;padding:15px}
.news-item{display:flex;gap:10px;margin-bottom:10px}
.news-item img{width:70px;height:70px;object-fit:cover;border-radius:8px}
.tiles{display:grid;grid-template-columns:repeat(2,1fr);gap:15px}
.tile{cursor:pointer;text-align:center;padding:40px;font-size:18px}
.tile:hover{background:#020617cc}
input,select,button{width:100%;margin:6px 0;padding:7px;border-radius:6px;border:none}
button{background:#38bdf8;color:#020617;cursor:pointer}
.back{cursor:pointer;margin-bottom:10px;display:inline-block}
footer{text-align:center;border-top:1px solid #1e293b;padding:10px}
canvas{background:#020617;border-radius:8px}
marquee{color:#94a3b8;margin-bottom:10px}
</style>
</head>

<body>
<div class="container">

<!-- –õ–ï–í–ê–Ø –ü–ê–ù–ï–õ–¨ -->
<aside class="sidebar">
<h3 style="text-align:center;">–†—ã–Ω–∫–∏</h3>

<div style="width:100%;height:600px;background:#131722;border-radius:12px;overflow:hidden">
<script src="https://s3.tradingview.com/external-embedding/embed-widget-market-overview.js" async>
{
"colorTheme":"dark",
"locale":"ru",
"width":"100%",
"height":"100%",
"showChart":false,
"isTransparent":true,
"tabs":[
{"title":"–í–∞–ª—é—Ç—ã","symbols":[
{"s":"FX_IDC:USDRUB"},{"s":"FX_IDC:EURRUB"},{"s":"FX_IDC:CNYRUB"}]},
{"title":"–ö—Ä–∏–ø—Ç–∞","symbols":[
{"s":"BINANCE:BTCUSDT"},{"s":"BINANCE:ETHUSDT"},{"s":"OKX:TONUSDT"}]},
{"title":"–†–µ—Å—É—Ä—Å—ã","symbols":[
{"s":"OANDA:XAUUSD"},{"s":"TVC:UKOIL"}]}
]
}
</script>
</div>
</aside>

<!-- –û–°–ù–û–í–ù–û–ô –ö–û–ù–¢–ï–ù–¢ -->
<main class="main">

<!-- –ù–û–í–û–°–¢–ò -->
<section class="news">
<h2>–ù–æ–≤–æ—Å—Ç–∏ —Ä—ã–Ω–∫–∞</h2>
<marquee id="ticker" scrollamount="5">–ó–∞–≥—Ä—É–∑–∫–∞ –Ω–æ–≤–æ—Å—Ç–µ–π...</marquee>
<div id="news"></div>
</section>

<!-- BTC –ì–†–ê–§–ò–ö -->
<section class="panel">
<h2>Bitcoin (BTC)</h2>
<div class="tradingview-widget-container">
<script src="https://s3.tradingview.com/external-embedding/embed-widget-mini-symbol-overview.js" async>
{
"symbol":"BINANCE:BTCUSDT",
"width":"100%",
"height":"240",
"locale":"ru",
"colorTheme":"dark",
"isTransparent":true
}
</script>
</div>
</section>

<!-- –ö–ê–õ–¨–ö–£–õ–Ø–¢–û–†–´ -->
<section id="content">
<div class="tiles" id="tiles">
<div class="tile" onclick="openCalc('compound')">üìà –°–ª–æ–∂–Ω—ã–π –ø—Ä–æ—Ü–µ–Ω—Ç</div>
<div class="tile" onclick="openCalc('profit')">üí∞ –ü—Ä–∏–±—ã–ª—å / –£–±—ã—Ç–æ–∫</div>
<div class="tile" onclick="openCalc('risk')">‚ö†Ô∏è –†–∏—Å–∫-–º–µ–Ω–µ–¥–∂–º–µ–Ω—Ç</div>
<div class="tile" onclick="openCalc('convert')">üí± –ë—ã—Å—Ç—Ä—ã–π –∫–æ–Ω–≤–µ—Ä—Ç–µ—Ä</div>
</div>
<div class="calc" id="calc" style="display:none"></div>
</section>

<!-- –ú–£–õ–¨–¢–ò–í–ê–õ–Æ–¢–ù–´–ô –ö–û–ù–í–ï–†–¢–ï–† -->
<section class="panel">
<h3>–û–Ω–ª–∞–π–Ω –∫–æ–Ω–≤–µ—Ä—Ç–∞—Ü–∏—è –≤–∞–ª—é—Ç</h3>
<input id="fxAmount" placeholder="–°—É–º–º–∞">

<select id="fxFrom">
<option>USD</option><option>EUR</option><option>RUB</option>
<option>CNY</option><option>BTC</option><option>ETH</option>
</select>

<select id="fxTo">
<option>RUB</option><option>USD</option><option>EUR</option>
<option>CNY</option><option>BTC</option><option>ETH</option>
</select>

<button onclick="fx()">–ö–æ–Ω–≤–µ—Ä—Ç–∏—Ä–æ–≤–∞—Ç—å</button>
<div id="fxResult"></div>
</section>

<footer>
üìä <a href="https://t.me/s_p_finance" target="_blank"><strong>S&P Finance</strong></a>
</footer>

</main>
</div>

<script>
/* === –ö–õ–Æ–ß–ò === */
const NEWS_API_KEY = "fa73b6b2c7d79ca71ee42f9b97d17ab5";
const FX_API_KEY   = "YOUR_FX_API_KEY";

/* === –ù–û–í–û–°–¢–ò (–û–ù–õ–ê–ô–ù) === */
async function loadNews(){
const url = `https://newsapi.org/v2/everything?q=finance OR crypto OR economy&language=ru&sortBy=publishedAt&pageSize=6&apiKey=${NEWS_API_KEY}`;
const r = await fetch(url);
const d = await r.json();

news.innerHTML = "";
ticker.innerHTML = "";

if(!d.articles) {
ticker.innerText = "–û—à–∏–±–∫–∞ –∑–∞–≥—Ä—É–∑–∫–∏ –Ω–æ–≤–æ—Å—Ç–µ–π";
return;
}

d.articles.forEach(n=>{
ticker.innerHTML += ` üì∞ ${n.title} ‚Ä¢ `;
news.innerHTML += `
<div class="news-item">
<img src="${n.urlToImage || 'https://via.placeholder.com/70'}">
<div>
<a href="${n.url}" target="_blank">${n.title}</a>
</div>
</div>`;
});
}
loadNews();
setInterval(loadNews, 1800000); // –∫–∞–∂–¥—ã–µ 30 –º–∏–Ω—É—Ç

/* === –ö–ê–õ–¨–ö–£–õ–Ø–¢–û–†–´ === */
function back(){calc.style.display="none";tiles.style.display="grid"}
function openCalc(t){
tiles.style.display="none";
calc.style.display="block";

if(t==="compound"){
calc.innerHTML=`
<span class="back" onclick="back()">‚¨Ö –ù–∞–∑–∞–¥</span>
<h3>–°–ª–æ–∂–Ω—ã–π –ø—Ä–æ—Ü–µ–Ω—Ç</h3>
<input id="s" placeholder="–°—É–º–º–∞">
<input id="r" placeholder="% –≥–æ–¥–æ–≤—ã—Ö">
<input id="y" placeholder="–õ–µ—Ç">
<button onclick="draw()">–†–∞—Å—Å—á–∏—Ç–∞—Ç—å</button>
<canvas id="chart" width="400" height="200"></canvas>`;
}

if(t==="profit"){
calc.innerHTML=`
<span class="back" onclick="back()">‚¨Ö –ù–∞–∑–∞–¥</span>
<h3>–ü—Ä–∏–±—ã–ª—å / –£–±—ã—Ç–æ–∫</h3>
<input id="e" placeholder="–¶–µ–Ω–∞ –≤—Ö–æ–¥–∞">
<input id="x" placeholder="–¶–µ–Ω–∞ –≤—ã—Ö–æ–¥–∞">
<input id="q" placeholder="–ö–æ–ª–∏—á–µ—Å—Ç–≤–æ">
<button onclick="alert('–†–µ–∑—É–ª—å—Ç–∞—Ç: '+((x.value-e.value)*q.value).toFixed(2))">–†–∞—Å—Å—á–∏—Ç–∞—Ç—å</button>`;
}

if(t==="risk"){
calc.innerHTML=`
<span class="back" onclick="back()">‚¨Ö –ù–∞–∑–∞–¥</span>
<h3>–†–∏—Å–∫-–º–µ–Ω–µ–¥–∂–º–µ–Ω—Ç</h3>
<input id="b" placeholder="–î–µ–ø–æ–∑–∏—Ç">
<input id="p" placeholder="–†–∏—Å–∫ %">
<input id="sl" placeholder="–°—Ç–æ–ø %">
<button onclick="alert('–†–∞–∑–º–µ—Ä –ø–æ–∑–∏—Ü–∏–∏: '+(b.value*(p.value/100)/(sl.value/100)).toFixed(2))">–†–∞—Å—Å—á–∏—Ç–∞—Ç—å</button>`;
}

if(t==="convert"){
calc.innerHTML=`
<span class="back" onclick="back()">‚¨Ö –ù–∞–∑–∞–¥</span>
<h3>–ë—ã—Å—Ç—Ä—ã–π –∫–æ–Ω–≤–µ—Ä—Ç–µ—Ä</h3>
<input id="a" placeholder="–°—É–º–º–∞">
<input id="c" placeholder="–ö—É—Ä—Å">
<button onclick="alert('–ò—Ç–æ–≥–æ: '+(a.value*c.value))">–ö–æ–Ω–≤–µ—Ä—Ç–∏—Ä–æ–≤–∞—Ç—å</button>`;
}
}

function draw(){
let s=+document.getElementById("s").value;
let r=+document.getElementById("r").value/100;
let y=+document.getElementById("y").value;
let ctx=document.getElementById("chart").getContext("2d");
ctx.clearRect(0,0,400,200);
ctx.beginPath();
for(let i=0;i<=y;i++){
let v=s*Math.pow(1+r,i)/10;
ctx.lineTo(i*40,200-v);
}
ctx.strokeStyle="#38bdf8";
ctx.stroke();
}

/* === FX –ú–£–õ–¨–¢–ò === */
async function fx(){
const r = await fetch(`https://v6.exchangerate-api.com/v6/${FX_API_KEY}/latest/${fxFrom.value}`);
const d = await r.json();
fxResult.innerText =
"–†–µ–∑—É–ª—å—Ç–∞—Ç: " + (fxAmount.value * d.conversion_rates[fxTo.value]).toFixed(4);
}
</script>

</body>
</html>
